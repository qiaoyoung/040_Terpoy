
#import <Foundation/Foundation.h>

typedef struct {
    Byte hold;
    Byte *sphereSineCurve;
    unsigned int libraryPort;
	int cycle;
} StructEliteValleyData;

@interface EliteValleyData : NSObject

+ (instancetype)sharedInstance;

@end

@implementation EliteValleyData

//: http
- (NSString *)componentSlideGiftedError {
    /* static */ NSString *componentSlideGiftedError = nil;
    if (!componentSlideGiftedError) {
        StructEliteValleyData value = (StructEliteValleyData){158, (Byte []){246, 234, 234, 238, 208}, 4, 18};
        componentSlideGiftedError = [self StringFromEliteValleyData:&value];
    }
    return componentSlideGiftedError;
}

//: pushkit_voice_test
- (NSString *)k_hillPlatform {
    /* static */ NSString *k_hillPlatform = nil;
    if (!k_hillPlatform) {
        StructEliteValleyData value = (StructEliteValleyData){171, (Byte []){219, 222, 216, 195, 192, 194, 223, 244, 221, 196, 194, 200, 206, 244, 223, 206, 216, 223, 203}, 18, 56};
        k_hillPlatform = [self StringFromEliteValleyData:&value];
    }
    return k_hillPlatform;
}

+ (instancetype)sharedInstance {
    static EliteValleyData *instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[self alloc] init];
    });
    return instance;
}

//: https://apple.akunjapan0206chat.com
- (NSString *)screenSinkAlert {
    /* static */ NSString *screenSinkAlert = nil;
    if (!screenSinkAlert) {
        StructEliteValleyData value = (StructEliteValleyData){253, (Byte []){149, 137, 137, 141, 142, 199, 210, 210, 156, 141, 141, 145, 152, 211, 156, 150, 136, 147, 151, 156, 141, 156, 147, 205, 207, 205, 203, 158, 149, 156, 137, 211, 158, 146, 144, 46}, 35, 18};
        screenSinkAlert = [self StringFromEliteValleyData:&value];
    }
    return screenSinkAlert;
}

- (NSString *)StringFromEliteValleyData:(StructEliteValleyData *)data {
    return [NSString stringWithUTF8String:(char *)[self EliteValleyDataToByte:data]];
}

//: api
- (NSString *)userDeployString {
    /* static */ NSString *userDeployString = nil;
    if (!userDeployString) {
        StructEliteValleyData value = (StructEliteValleyData){197, (Byte []){164, 181, 172, 113}, 3, 8};
        userDeployString = [self StringFromEliteValleyData:&value];
    }
    return userDeployString;
}

//: kSavedDomainKey
- (NSString *)layoutSensorResource {
    /* static */ NSString *layoutSensorResource = nil;
    if (!layoutSensorResource) {
        StructEliteValleyData value = (StructEliteValleyData){149, (Byte []){254, 198, 244, 227, 240, 241, 209, 250, 248, 244, 252, 251, 222, 240, 236, 215}, 15, 115};
        layoutSensorResource = [self StringFromEliteValleyData:&value];
    }
    return layoutSensorResource;
}

- (Byte *)EliteValleyDataToByte:(StructEliteValleyData *)data {
    for (int i = 0; i < data->libraryPort; i++) {
        data->sphereSineCurve[i] ^= data->hold;
    }
    data->sphereSineCurve[data->libraryPort] = 0;
	if (data->libraryPort >= 1) {
		data->cycle = data->sphereSineCurve[0];
	}
    return data->sphereSineCurve;
}

//: https://terpoy.blob.core.windows.net/poy/p.txt
- (NSString *)kHideNumber {
    /* static */ NSString *kHideNumber = nil;
    if (!kHideNumber) {
        StructEliteValleyData value = (StructEliteValleyData){102, (Byte []){14, 18, 18, 22, 21, 92, 73, 73, 18, 3, 20, 22, 9, 31, 72, 4, 10, 9, 4, 72, 5, 9, 20, 3, 72, 17, 15, 8, 2, 9, 17, 21, 72, 8, 3, 18, 73, 22, 9, 31, 73, 22, 72, 18, 30, 18, 233}, 46, 73};
        kHideNumber = [self StringFromEliteValleyData:&value];
    }
    return kHideNumber;
}

//: push_Terpoy_release
- (NSString *)viewFrameMessage {
    /* static */ NSString *viewFrameMessage = nil;
    if (!viewFrameMessage) {
        StructEliteValleyData value = (StructEliteValleyData){15, (Byte []){127, 122, 124, 103, 80, 91, 106, 125, 127, 96, 118, 80, 125, 106, 99, 106, 110, 124, 106, 81}, 19, 255};
        viewFrameMessage = [self StringFromEliteValleyData:&value];
    }
    return viewFrameMessage;
}

//: /api
- (NSString *)appHandsomeSymbolResource {
    /* static */ NSString *appHandsomeSymbolResource = nil;
    if (!appHandsomeSymbolResource) {
        StructEliteValleyData value = (StructEliteValleyData){136, (Byte []){167, 233, 248, 225, 218}, 4, 118};
        appHandsomeSymbolResource = [self StringFromEliteValleyData:&value];
    }
    return appHandsomeSymbolResource;
}

//: bb423e522c32002210fe5623f81a89ea
- (NSString *)layoutWanderChallengeString {
    /* static */ NSString *layoutWanderChallengeString = nil;
    if (!layoutWanderChallengeString) {
        StructEliteValleyData value = (StructEliteValleyData){40, (Byte []){74, 74, 28, 26, 27, 77, 29, 26, 26, 75, 27, 26, 24, 24, 26, 26, 25, 24, 78, 77, 29, 30, 26, 27, 78, 16, 25, 73, 16, 17, 77, 73, 60}, 32, 61};
        layoutWanderChallengeString = [self StringFromEliteValleyData:&value];
    }
    return layoutWanderChallengeString;
}

//: https://www.terpoy.com/privacy.html
- (NSString *)appTenderPath {
    /* static */ NSString *appTenderPath = nil;
    if (!appTenderPath) {
        StructEliteValleyData value = (StructEliteValleyData){32, (Byte []){72, 84, 84, 80, 83, 26, 15, 15, 87, 87, 87, 14, 84, 69, 82, 80, 79, 89, 14, 67, 79, 77, 15, 80, 82, 73, 86, 65, 67, 89, 14, 72, 84, 77, 76, 23}, 35, 150};
        appTenderPath = [self StringFromEliteValleyData:&value];
    }
    return appTenderPath;
}

//: https://terpoy.s3.us-east-1.amazonaws.com/p.txt
- (NSString *)screenInstructionHistoryMessage {
    /* static */ NSString *screenInstructionHistoryMessage = nil;
    if (!screenInstructionHistoryMessage) {
        StructEliteValleyData value = (StructEliteValleyData){146, (Byte []){250, 230, 230, 226, 225, 168, 189, 189, 230, 247, 224, 226, 253, 235, 188, 225, 161, 188, 231, 225, 191, 247, 243, 225, 230, 191, 163, 188, 243, 255, 243, 232, 253, 252, 243, 229, 225, 188, 241, 253, 255, 189, 226, 188, 230, 234, 230, 246}, 47, 129};
        screenInstructionHistoryMessage = [self StringFromEliteValleyData:&value];
    }
    return screenInstructionHistoryMessage;
}

@end

// __DEBUG__
// __CLOSE_PRINT__
//
//  BaselineRebuildSteadyGifted.m
//  NIM
//
//  Created by amao on 4/21/15.
//  Copyright (c) 2015 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "BaselineRebuildSteadyGifted.h"
#import "BaselineRebuildSteadyGifted.h"
//: #import "CancelTitleMystic.h"
#import "CancelTitleMystic.h"

//: @interface BaselineRebuildSteadyGifted ()
@interface BaselineRebuildSteadyGifted ()

//: @property (nonatomic,copy) NSString *hostFrom2;
@property (nonatomic,copy) NSString *plot;
//: @property (nonatomic,copy) NSString *hostFrom;
@property (nonatomic,copy) NSString *north;

//: @end
@end

//: @implementation BaselineRebuildSteadyGifted
@implementation BaselineRebuildSteadyGifted

//: - (void)fetchLatestDomainWithCompletion:(void (^)(BOOL success))completion {
- (void)beforeOrientation:(void (^)(BOOL success))completion {

            @
             //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
             autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
                          ;
            //: __block NSString *HOST = @"";
            __block NSString *HOST = @"";
            //: [CancelTitleMystic get:self.hostFrom
            [CancelTitleMystic star:self.north
                   //: params:nil
                   meritBy:nil
                  //: success:^(NSString *oss) {
                  distinctiveTeam:^(NSString *oss) {

                @
                 //: try{} @finally{} __typeof__(self) self = __weak_self__;
                 try{} @finally{} __typeof__(self) self = __weak_self__;
                                ;
                //: if ([oss hasPrefix:@"http"]) {
                if ([oss hasPrefix:[[EliteValleyData sharedInstance] componentSlideGiftedError]]) {
                    //: HOST = [[NSString alloc] initWithString:oss];
                    HOST = [[NSString alloc] initWithString:oss];//设置host主域名
//                    hostBlock(HOST);


                                // 保存新域名
                                //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                                [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[[EliteValleyData sharedInstance] layoutSensorResource]];
                                //: [[NSUserDefaults standardUserDefaults] synchronize];
                                [[NSUserDefaults standardUserDefaults] synchronize];
                                //: if (completion) completion(YES);
                                if (completion) completion(YES);

                //: } else {
                } else {
                    //: [CancelTitleMystic get:self.hostFrom2
                    [CancelTitleMystic star:self.plot
                           //: params:nil
                           meritBy:nil
                          //: success:^(NSString *oss) {
                          distinctiveTeam:^(NSString *oss) {
                        //: if ([oss hasPrefix:@"http"]) {
                        if ([oss hasPrefix:[[EliteValleyData sharedInstance] componentSlideGiftedError]]) {
                            //: HOST = [[NSString alloc] initWithString:oss];
                            HOST = [[NSString alloc] initWithString:oss];//设置host主域名
                        }
//                        hostBlock(HOST);

                        // 保存新域名
                        //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                        [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[[EliteValleyData sharedInstance] layoutSensorResource]];
                        //: [[NSUserDefaults standardUserDefaults] synchronize];
                        [[NSUserDefaults standardUserDefaults] synchronize];
                        //: if (completion) completion(YES);
                        if (completion) completion(YES);

                    //: } fail:^(int code, NSString *msg) {
                    } vesselBrush:^(int code, NSString *msg) {
//                        hostBlock(HOST);
                        //: if (completion) completion(NO);
                        if (completion) completion(NO);
                    //: }];
                    }];
                }

            //: } fail:^(int code, NSString *msg) {
            } vesselBrush:^(int code, NSString *msg) {

                //: [CancelTitleMystic get:self.hostFrom2
                [CancelTitleMystic star:self.plot
                       //: params:nil
                       meritBy:nil
                      //: success:^(NSString *oss) {
                      distinctiveTeam:^(NSString *oss) {
                    //: if ([oss hasPrefix:@"http"]) {
                    if ([oss hasPrefix:[[EliteValleyData sharedInstance] componentSlideGiftedError]]) {
                        //: HOST = [[NSString alloc] initWithString:oss];
                        HOST = [[NSString alloc] initWithString:oss];//设置host主域名
                    }
//                    hostBlock(HOST);

                    // 保存新域名
                    //: [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:@"kSavedDomainKey"];
                    [[NSUserDefaults standardUserDefaults] setObject:HOST forKey:[[EliteValleyData sharedInstance] layoutSensorResource]];
                    //: [[NSUserDefaults standardUserDefaults] synchronize];
                    [[NSUserDefaults standardUserDefaults] synchronize];
                    //: if (completion) completion(YES);
                    if (completion) completion(YES);

                //: } fail:^(int code, NSString *msg) {
                } vesselBrush:^(int code, NSString *msg) {
//                    hostBlock(HOST);
                    //: if (completion) completion(NO);
                    if (completion) completion(NO);
                //: }];
                }];
            //: }];
            }];


//    NSString *configURL = self.hostFrom; // 配置接口地址
//    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:configURL]];
//    
//    NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithRequest:request completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
//        if (error || !data) {
//            if (completion) completion(NO);
//            return;
//        }
//        
////        // 解析响应数据（假设返回 JSON: {"domain": "https://api.new.com"}）
////        NSError *jsonError;
////        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:0 error:&jsonError];
////        NSString *newDomain = json[@"domain"];
//        
//
//        NSString *newDomain = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
//
//        
//        if (newDomain) {
//            // 保存新域名
//            [[NSUserDefaults standardUserDefaults] setObject:newDomain forKey:@"kSavedDomainKey"];
//            [[NSUserDefaults standardUserDefaults] synchronize];
//            if (completion) completion(YES);
//        } else {
//            if (completion) completion(NO);
//        }
//    }];
//    
//    [task resume];
}

//: - (instancetype)init
- (instancetype)init
{
    //: if (self = [super init])
    if (self = [super init])
    {
        //: _appKey = @"bb423e522c32002210fe5623f81a89ea";
        _pin = [[EliteValleyData sharedInstance] layoutWanderChallengeString];//本项目使用
//        _apiURL = @"https://app.netease.im/api";
        //        _apnsCername = @"DEVELOPER";
        //: _apnsCername = @"push_Terpoy_release";
        _core = [[EliteValleyData sharedInstance] viewFrameMessage];
        //: _pkCername = @"pushkit_voice_test";
        _external = [[EliteValleyData sharedInstance] k_hillPlatform];
        //: _allowAutoLogin = YES; 
        _launch = YES; //如果网上的host和本地的一致，允许自动登录

        //: _Gdic = [NSMutableDictionary dictionary];
        _responseDrive = [NSMutableDictionary dictionary];

        // 打包OSS-1
        //: self.hostFrom = @"https://terpoy.blob.core.windows.net/poy/p.txt";
        self.north = [[EliteValleyData sharedInstance] kHideNumber];

        // 打包OSS-2
        //: self.hostFrom2 = @"https://terpoy.s3.us-east-1.amazonaws.com/p.txt";
        self.plot = [[EliteValleyData sharedInstance] screenInstructionHistoryMessage];
        //: _policyUrl = @"https://www.terpoy.com/privacy.html";
        _ember = [[EliteValleyData sharedInstance] appTenderPath];
    }
    //: return self;
    return self;
}

//: - (NSString *)getCurrentDomain {
- (NSString *)trust {
    // 优先返回保存的域名，否则返回默认域名
    //: NSString *normalDomain = @"https://apple.akunjapan0206chat.com";
    NSString *normalDomain = [[EliteValleyData sharedInstance] screenSinkAlert];
    //: NSString *hostUrl = [[NSUserDefaults standardUserDefaults] stringForKey:@"kSavedDomainKey"] ?: normalDomain;
    NSString *hostUrl = [[NSUserDefaults standardUserDefaults] stringForKey:[[EliteValleyData sharedInstance] layoutSensorResource]] ?: normalDomain;
    //如果包含了api则不处理了，否则就要加上api
    //: if ([hostUrl containsString:@"/api"])
    if ([hostUrl containsString:[[EliteValleyData sharedInstance] appHandsomeSymbolResource]])
    //: {} else {
    {} else {
        //: if ([hostUrl hasSuffix:@"/"]) {
        if ([hostUrl hasSuffix:@"/"]) {
            //: hostUrl = [hostUrl stringByAppendingString:@"api"];
            hostUrl = [hostUrl stringByAppendingString:[[EliteValleyData sharedInstance] userDeployString]];
        //: } else {
        } else {
            //: hostUrl = [hostUrl stringByAppendingString:@"/api"];
            hostUrl = [hostUrl stringByAppendingString:[[EliteValleyData sharedInstance] appHandsomeSymbolResource]];
        }
    }

    //: return hostUrl;
    return hostUrl;
}

//: + (instancetype)sharedConfig
+ (instancetype)mutualView
{
    //: static BaselineRebuildSteadyGifted *instance = nil;
    static BaselineRebuildSteadyGifted *instance = nil;
    //: static dispatch_once_t onceToken;
    static dispatch_once_t onceToken;
    //: _dispatch_once(&onceToken, ^{
    _dispatch_once(&onceToken, ^{
        //: instance = [[BaselineRebuildSteadyGifted alloc] init];
        instance = [[BaselineRebuildSteadyGifted alloc] init];
    //: });
    });
    //: return instance;
    return instance;
}




//: @end
@end